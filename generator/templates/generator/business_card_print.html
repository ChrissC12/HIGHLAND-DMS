{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Print Business Card - {{ employee.full_name }}</title>
    <style>
        /*
        ===================================================================
        STYLES FOR THE PRINT-READY BUSINESS CARD
        ===================================================================
        */
        :root {
            --hc-white: #FFFFFF;
            --hc-gold: #D4AF37;
            --hc-red: #C0392B;
            --hc-dark: #2C3E50;
            --card-width: 3.5in;  /* Standard Business Card Width */
            --card-height: 2in;   /* Standard Business Card Height */
        }
        
        /* Defines the exact size of the printed page */
        @page {
            size: var(--card-width) var(--card-height);
            margin: 0;
        }

        body {
            margin: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #FFFFFF !important;
            -webkit-print-color-adjust: exact !important;
            color-adjust: exact !important;
            width: var(--card-width);
            height: var(--card-height);
        }
        
        .print-card {
            width: var(--card-width);
            height: var(--card-height);
            overflow: hidden;
            position: relative;
            page-break-after: always;
            box-sizing: border-box;
        }
        .print-card:last-child {
            page-break-after: avoid;
        }

        /* --- STYLES FOR THE CARD FACES (MATCHING PREVIEW) --- */
        .business-card--front {
            background: var(--hc-white);
            padding: 0.2in;
            display: flex;
            align-items: center;
            gap: 0.15in;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        
        .front__logo-area {
            flex-shrink: 0;
            text-align: center;
        }
        
        .front__logo {
            width: 0.6in;
            height: 0.6in;
            object-fit: contain;
        }
        
        .front__separator {
            width: 0.02in;
            height: 60%;
            background-color: var(--hc-gold);
        }
        
        .front__main-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .front__employee-name {
            font-size: 0.24in;
            font-weight: 700;
            color: var(--hc-dark);
            margin: 0;
            line-height: 1.1;
        }
        
        .front__employee-title {
            font-size: 0.16in;
            color: var(--hc-red);
            margin: 0.02in 0 0.15in 0;
        }
        
        .front__contact-info {
            font-size: 0.11in;
            line-height: 1.6;
            color: #555;
        }
        
        .front__contact-info strong {
            color: var(--hc-dark);
        }
        
        /* Back Side Styling */
        .business-card--back {
            background: var(--hc-dark);
            color: var(--hc-white);
            display: flex;
            padding: 0.2in;
            position: relative;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        
        .back__left-col {
            flex: 0 0 60%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .back__right-col {
            flex: 0 0 40%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-left: 0.01in solid var(--hc-gold);
            padding-left: 0.15in;
        }
        
        .back__logo-area {
            display: flex;
            align-items: center;
            gap: 0.1in;
            margin-bottom: 0.1in;
        }
        
        .back__logo {
            width: 0.4in;
            height: 0.4in;
            object-fit: contain;
        }
        
        .back__company-name {
            font-size: 0.14in;
            font-weight: bold;
            color: var(--hc-white);
            margin: 0;
        }
        
        .back__tagline {
            font-size: 0.1in;
            font-style: italic;
            color: var(--hc-gold);
            margin-bottom: 0.15in;
        }
        
        .back__contact-details {
            font-size: 0.09in;
            line-height: 1.6;
        }
        
        .back__contact-details p {
            margin: 0.04in 0;
        }
        
        .back__contact-details strong {
            color: var(--hc-gold);
            margin-right: 0.05in;
        }
        
        .back__qr-code {
            width: 0.8in;
            height: 0.8in;
            background: white;
            padding: 0.05in;
            border-radius: 0.04in;
            margin-bottom: 0.08in;
        }
        
        .back__website {
            font-size: 0.09in;
            color: var(--hc-white);
            text-align: center;
            margin: 0.05in 0;
        }
        
        .back__social-icons {
            display: flex;
            justify-content: center;
            gap: 0.08in;
            margin-top: 0.05in;
        }
        
        .back__social-link {
            color: var(--hc-white);
            text-decoration: none;
            font-size: 0.12in;
            opacity: 0.8;
        }
        
        .scan-text {
            font-size: 0.09in;
            color: var(--hc-gold);
            text-align: center;
            margin: 0;
        }
    </style>
</head>
<body onload="window.print(); window.onafterprint = window.close;">

    <!-- ============================================= -->
    <!-- FRONT OF THE CARD (FIRST PAGE FOR PRINTER) -->
    <!-- ============================================= -->
    <div class="print-card">
        <div class="business-card--front">
            <div class="front__logo-area">
                {% if company_info.logo_thumbnail %}
                <img src="{{ company_info.logo_thumbnail.url }}" alt="{{ company_info.name }} Logo" class="front__logo">
                {% else %}
                <div class="front__logo" style="background:#eee; border:1px solid #ccc;"></div>
                {% endif %}
            </div>
            
            <div class="front__separator"></div>
            
            <div class="front__main-info">
                <h1 class="front__employee-name">{{ employee.full_name }}</h1>
                <p class="front__employee-title">Position: {{ employee.job_title }}</p>
                
                <address class="front__contact-info" style="font-style: normal;">
                    <strong>Phone:</strong> {{ card.personal_phone|default:company_info.phone|default:"N/A" }}<br>
                    <strong>Email:</strong> {{ card.personal_email|default:company_info.email|default:"N/A" }}<br>
                    <strong>Website:</strong> {{ card.website_url|default:company_info.website|default:"N/A" }}
                </address>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- BACK OF THE CARD (SECOND PAGE FOR PRINTER) -->
    <!-- ============================================= -->
    <div class="print-card">
        <div class="business-card--back">
            <div class="back__left-col">
                <div>
                    <div class="back__logo-area">
                        {% if company_info.logo_thumbnail %}
                        <img src="{{ company_info.logo_thumbnail.url }}" alt="{{ company_info.name }} Logo" class="back__logo">
                        {% endif %}
                        <h3 class="back__company-name">{{ company_info.name }}</h3>
                    </div>
                    
                    {% if company_info.tagline %}
                    <p class="back__tagline">"{{ company_info.tagline }}"</p>
                    {% endif %}
                    
                    <div class="back__contact-details">
                        <p><strong>Address:</strong> {{ company_info.address|default:"N/A" }}</p>
                        <p><strong>Phone:</strong> {{ company_info.phone|default:"N/A" }}</p>
                        <p><strong>Email:</strong> {{ company_info.email|default:"N/A" }}</p>
                        <p><strong>Website:</strong> {{ company_info.website|default:"N/A" }}</p>
                    </div>
                </div>
                
                <div class="back__social-icons">
                    {% if company_info.linkedin_url %}
                    <a href="{{ company_info.linkedin_url }}" target="_blank" class="back__social-link">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    {% endif %}
                    {% if company_info.instagram_url %}
                    <a href="{{ company_info.instagram_url }}" target="_blank" class="back__social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                    {% endif %}
                    {% if company_info.facebook_url %}
                    <a href="{{ company_info.facebook_url }}" target="_blank" class="back__social-link">
                        <i class="fab fa-facebook"></i>
                    </a>
                    {% endif %}
                    {% if company_info.twitter_url %}
                    <a href="{{ company_info.twitter_url }}" target="_blank" class="back__social-link">
                        <i class="fab fa-twitter"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="back__right-col">
                {% if employee.qr_code %}
                <img src="{{ employee.qr_code.url }}" alt="QR Code" class="back__qr-code">
                {% else %}
                <div class="back__qr-code" style="background:#eee; display: flex; align-items: center; justify-content: center;">
                    <span style="color: #666; font-size: 8px;">QR Code</span>
                </div>
                {% endif %}
                
                {% if company_info.website %}
                <p class="back__website">{{ company_info.website }}</p>
                {% endif %}
                
                <p class="scan-text">Scan to save contact</p>
            </div>
        </div>
    </div>

</body>
</html>